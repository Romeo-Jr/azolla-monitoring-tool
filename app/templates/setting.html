{% extends 'base.html' %}

{% block head %}
    <!-- BOOTSTRAP 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <!-- BASE CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/base.css', _external=True) }}">
    <!-- SIDENAV -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/sidenav.css', _external=True) }}">
    <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block title %}
Setting
{% endblock %}

{% block body %}
    <div class="sidenav" id="sidenav">
        <div class="p-2 text-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="#ffffff" class="bi bi-bar-chart-fill" viewBox="0 0 16 16">
                <path d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2z"/>
              </svg>
            <br>
            <br>
            <h4 class="text-white">Azolla Monitoring Tool</h4>
        </div>
        <a href="{{ url_for('main.dashboard') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-fill" viewBox="0 0 16 16">
                <path d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2z"/>
            </svg> &nbsp; Dashboard</a>
        <a href="{{ url_for('main.setting') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
              </svg> &nbsp; Settings
        </a>
        <a href="{{ url_for('main.logout') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
            </svg> &nbsp; Logout
        </a>
        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
            <i class="fa fa-bars"></i>
        </a>
    </div>

    <div class="main-content mt-3">
        <div class="card rounded-0">
            <div class="card-body">
                <div class="card rounded-0 p-3">
                    <div class="card-header text-white bg-dark rounded-0">
                        Profile
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm text-center">
                                <img width="150px" height="150px" src="{{ url_for('static', filename='images/' + user_info['profile_pic']) }}" alt="" srcset="">
                            </div>
                            <div class="col-md-9">
                                <div class="row gap-1">
                                    <div class="col">
                                        <div class="small fw-bold">ID</div>
                                        <h5>{{ user_info['id'] }}</h5>
                                        <div class="small fw-bold">Username</div>
                                        <h5>{{ user_info['username'] }}</h5>
                                        <br>
                                        <a class="btn btn-dark rounded-0" href="{{ url_for('main.update_profile') }}" target="_blank" rel="noopener noreferrer">Update Profile</a>
                                    </div>
                                    <div class="col">
                                        <div class="small fw-bold">Email</div>
                                        <h5>{{ user_info['email'] }}</h5>
                                        <div class="small fw-bold">Password</div>
                                        <h5>*******</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="card rounded-0 p-3">
                    <div class="card-header bg-dark text-white rounded-0">
                        <div class="p"><strong>Activity Logs</strong></div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive" style="height: 350px;">
                            <table class="table table-striped">
                            <thead>
                              <tr>
                                <th scope="col">Logged In</th>
                                <th scope="col">Logged Out</th>
                                <th scope="col">Duration</th>
                              </tr>
                            </thead>
                            <tbody>
                            {% for log in current_user_logs %}
                            <tr>
                                <td>{{ log.user_logged_in }}</td>
                                <td>{{ log.user_logout }}</td>
                                <td>{{ log.duration }} min(s)</td>
                              </tr>
                            {% endfor %}
                            </tbody>
                          </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* Toggle between adding and removing the "responsive" class to topnav when the user clicks on the icon */
        function myFunction() {
            var x = document.getElementById("sidenav");
            if (x.className === "sidenav") {
                x.className += " responsive";
            } else {
                x.className = "sidenav";
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
{% endblock %}